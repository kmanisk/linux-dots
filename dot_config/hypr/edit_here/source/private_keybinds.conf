# ==============================================================================
# USER CONFIGURATION: keybinds.conf
# ==============================================================================
# Add your custom settings for keybinds here.
# These will override or add to the defaults found in ~/.config/hypr/source/keybinds.conf
# ==============================================================================

# -------------------------------------------------------------------------------------------------
# VARIABLES OVERRIDE
# -------------------------------------------------------------------------------------------------
# Uncomment and modify if you want different defaults than the main config
$fileManager = thunar  # NEW default is yazi

unbind = ALT, N
unbind = ALT, H
unbind = ALT SHIFT,N
# -------------------------------------------------------------------------------------------------
# CONFLICT RESOLUTIONS - Keeping your old keybinds, moving new functions to SHIFT variants
# -------------------------------------------------------------------------------------------------

## CONFLICT: ALT + P
# Keeping YOUR OLD: Launch Menu for Apps at ALT+P
# Moving NEW: Mute Audio to ALT+SHIFT+P
unbind = ALT, P
bindd = ALT, P, Launch Menu for Apps, exec, pkill rofi; rofi -show drun -run-command "uwsm app -- {cmd}"
bindld = ALT SHIFT, P, Mute Audio, exec, $osdclient --output-volume mute-toggle

## CONFLICT: ALT + M  
# Keeping YOUR OLD: Open Spotify at ALT+M
# Moving NEW: Mono Audio Toggle to ALT+SHIFT+M
# unbind = ALT, M
# bindd = ALT, M, Open Spotify, exec, uwsm-app spotify
# bindld = ALT SHIFT, M, Mono Audio Toggle, exec, $scripts/audio/mono_audio_pipewire.sh

## CONFLICT: ALT + B
# Keeping YOUR OLD: Open Browser at ALT+B
# NEW: Brightness Slider already at ALT+SHIFT+B in your old config (no change needed)
unbind = ALT, B
# bindd = ALT, B, Open Browser, exec, firefox 

# Test new browser window in current workspace with Chromium
# bindd = ALT, B, Chromium New Window, exec, chromium 
bindd = ALT, B, Chromium New Window, exec, prime-run firefox 

## CONFLICT: SUPER + Q
# Keeping YOUR OLD: Edit Hypr Keybinds at SUPER+Q
# NEW: Terminal is available at ALT+RETURN (your binding) and many other keys
unbind = $mainMod, Q
bindd = $mainMod, Q, Edit Hypr Keybinds, exec, kitty --class nvim -e nvim ~/.config/hypr/edit_here/source/keybinds.conf

## CONFLICT: SUPER + ALT + M
# Keeping YOUR OLD: Spotify Toggle at SUPER+ALT+M
# Moving NEW: Music Recognition to SUPER+CTRL+M
bindd = $mainMod CTRL, M, Music Recognition aka Shazam, exec, uwsm-app -- kitty --class music_recognition.sh -e $scripts/music/music_recognition.sh

## CONFLICT: SUPER + SHIFT + SPACE
# Both use Matugen Theme Config but different scripts
# Keeping the NEW script path (rofi_theme.sh) as it's likely updated
# No action needed - new default is fine

# -------------------------------------------------------------------------------------------------
# YOUR ADDITIONAL KEYBINDS (Not in new default config)
# -------------------------------------------------------------------------------------------------

# Terminal
bindd = ALT, RETURN, Terminal, exec, $terminal

# File Manager (GUI version alongside new terminal version)
bindd = ALT, E, File Manager, exec, uwsm-app $fileManager

# Text Editor
bindd = ALT SHIFT, N, Open Text Editor, exec, uwsm-app -- kitty --class nvim -e $textEditor
bindd = $mainMod SHIFT, T, Edit Hypr Keybinds, exec, kitty --class nvim -e nvim
bindd = ALT SHIFT, T, Edit Hypr Keybinds, exec, kitty --class nvim -e nvim

# Web Search
bindd = ALT SHIFT, Q, Web Search, exec, uwsm-app -- ~/.config/scripts/rofi-websearch

# Window Management
bindd = ALT, W, Close active window, killactive

# System Utilities (Your SHIFT variants for compatibility)
bindd = ALT SHIFT, 1, Wi-Fi Manager, exec, uwsm-app -- $terminal --class wifitui -e wifitui
bindd = ALT SHIFT, 2, Bluetooth Manager, exec, uwsm-app -- blueman-manager
bindd = ALT SHIFT, 3, Audio Mixer, exec, uwsm-app -- pavucontrol
bindd = ALT SHIFT, 4, Wallpaper App, exec, uwsm-app -- waypaper

# Brightness Slider (keeping at your old location since ALT+B is used for browser)
bindd = ALT SHIFT, B, Brightness Slider, exec, uwsm-app -- $scripts/sliders/brightness_slider.sh

# Audio Control
bindd = ALT, N, Mute Audio, exec, $osdclient --output-volume mute-toggle

# Sequential Workspace Switching
bindd = $mainMod, BRACKETLEFT, Prev workspace, workspace, -1
bindd = $mainMod, BRACKETRIGHT, Next workspace, workspace, +1
bindd = $mainMod SHIFT, BRACKETLEFT, Move window to prev ws, movetoworkspace, -1
bindd = $mainMod SHIFT, BRACKETRIGHT, Move window to next ws, movetoworkspace, +1

# Home-row Workspace Navigation
bindd = ALT, A, Workspace 1, workspace, 1
bindd = ALT, S, Workspace 2, workspace, 2
bindd = ALT, D, Workspace 3, workspace, 3
bindd = ALT, F, Workspace 4, workspace, 4
bindd = ALT, G, Workspace 5, workspace, 5

bindd = ALT SHIFT, A, Move window to ws1, movetoworkspace, 1
bindd = ALT SHIFT, S, Move window to ws2, movetoworkspace, 2
bindd = ALT SHIFT, D, Move window to ws3, movetoworkspace, 3
bindd = ALT SHIFT, F, Move window to ws4, movetoworkspace, 4
bindd = ALT SHIFT, G, Move window to ws5, movetoworkspace, 5

# Scratchpad (Additional ALT variants)
bindd = ALT, Z, Toggle Scratchpad, togglespecialworkspace, magic
bindd = ALT SHIFT, Z, Move to Scratchpad, movetoworkspace, special:magic

# Install Packages Window
bindd = ALT SHIFT, I, Direct Install Window, exec, hyprctl dispatch exec "[float;size 60% 70%;center] kitty --title 'Install Packages' -e bash -c '$HOME/work/install; read -n 1 -s -r -p \"Press any key to close...\"'"

# -------------------------------------------------------------------------------------------------
# SUMMARY OF CHANGES
# -------------------------------------------------------------------------------------------------
# Your old keybinds are kept at their original locations.
# New conflicting functions moved to SHIFT variants:
#
# ALT + P           → Your app launcher (old)
# ALT + SHIFT + P   → Mute audio (new)
#
# ALT + M           → Spotify (old)
# ALT + SHIFT + M   → Mono audio toggle (new)
#
# ALT + B           → Open browser (old)
# ALT + SHIFT + B   → Brightness slider (old location, kept)
#
# SUPER + Q         → Edit keybinds (old)
# Terminal available at ALT+RETURN and other keys
#
# SUPER + ALT + M   → Spotify toggle (old)
# SUPER + CTRL + M  → Music recognition/Shazam (new)
#
# Other new features available at their default locations:
# - App launcher also at ALT+SPACE (new default)
# - System utilities at ALT+1/2/3/4 (new) AND ALT+SHIFT+1/2/3/4 (your old)
# - Speech-to-text: SUPER+I / SUPER+SHIFT+I
# - Text-to-speech: SUPER+O / SUPER+SHIFT+O
# - Workspace cycling: ALT+SHIFT+TAB / SUPER+SHIFT+TAB
# - Display refresh: ALT+7 / ALT+8

# -- TERMINAL-CLIPBOARD-START --
unbind = $mainMod, V
bindd = $mainMod, V, Clipboard History, exec, $scripts/clipboard/toggle_terminal_clipboard.sh uwsm-app -- kitty --class terminal_clipboard.sh -e "$scripts/clipboard/terminal_clipboard.sh"
# -- TERMINAL-CLIPBOARD-END --
# --- Resize tiled windows (vim keys) ---
# --- Window Resizing (Fixed) ---
# CHANGED: 'bindd' -> 'binded' (Enable 'repeat' flag so you can hold the key)
binde = ALT SHIFT, h, resizeactive, -20 0
binde = ALT SHIFT, l, resizeactive,  20 0
binde = ALT SHIFT, k, resizeactive,  0 -20
binde = ALT SHIFT, j, resizeactive,  0  20
# --- Focus movement (vim keys) ---
bind = ALT, h, movefocus, l
bind = ALT, l, movefocus, r
bind = ALT, k, movefocus, u
bind = ALT, j, movefocus, d
# --- Unbind SUPER + Q ---
unbind = $mainMod, Q
unbind = $mainMod, W, Launch Browser, exec, uwsm-app -- $browser
unbind = $mainMod, E, File Manager, exec, uwsm-app -- $terminal -e $fileManager
unbind = $mainMod, R, Open Text Editor, exec, uwsm-app -- kitty --class nvim -e $textEditor
unbind = ALT, SPACE, Launch Menu for Apps, exec, pkill rofi; rofi -show drun -run-command "uwsm app -- {cmd}"
unbind = CTRL SHIFT, SPACE, Show Keybinds, exec, uwsm-app -- pkill rofi; $scripts/rofi/keybindings.sh
unbind = $mainMod CTRL, SPACE, Search Emojis, exec, uwsm-app -- pkill rofi; $scripts/rofi/emoji.sh
# unbind = $mainMod CTRL SHIFT, SPACE, Calculator, exec, uwsm-app -- pkill rofi; $scripts/rofi/calculator.sh
# unbind = $mainMod SHIFT, SPACE, Matugen Theme Config, exec, uwsm-app -- pkill rofi; $scripts/rofi/rofi_theme.sh
# unbind = CTRL, SPACE, Rofi Wallpaper Selector, exec, uwsm-app -- pkill rofi; $scripts/rofi/rofi_wallpaper_selctor.sh
# unbind = $mainMod, SPACE, System Menu, exec, uwsm-app -- $scripts/dusky_system/control_center/dusky_control_center.py
# unbind = CTRL ALT, SPACE, UWSM uuctl - display active user units, exec, uwsm-app -- pkill rofi; uuctl
unbind = ALT, V, 
unbind = ALT, 4, Wallpaper App, exec, uwsm-app -- waypaper
bindd = ALT, U, Hyprsunset Slider, exec, uwsm-app -- $scripts/sliders/hyprsunset_slider.sh
# --- Unbind upstream Mono Audio Toggle ---
unbind = ALT, M
bind = ALT SHIFT, M, exec, uwsm-app -- $scripts/spotify/spotify_toggle.sh

bindd = SUPER, Q, Edit Hypr keybinds, exec, kitty --class hypr-edit -e nvim /home/manisk/.config/hypr/edit_here/source/keybinds.conf
